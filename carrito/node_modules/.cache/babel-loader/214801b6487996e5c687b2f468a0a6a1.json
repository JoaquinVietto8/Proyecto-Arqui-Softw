{"ast":null,"code":"import Cookies from \"universal-cookie\";\nconst Cookie = new Cookies();\nexport async function loginCookies(token) {\n  let cookie = Cookie.get(\"user\");\n\n  if (cookie == undefined) {\n    Cookie.set(\"user\", token, {\n      path: \"/\"\n    });\n    return true;\n  }\n\n  let newCookie = token;\n  console.log(\"New Token\", token);\n  Cookie.set(\"user\", newCookie, {\n    path: \"/\"\n  });\n  return true;\n}\nexport function logOutCookies() {\n  let cookie = Cookie.get(\"user\");\n\n  if (cookie == undefined) {\n    return;\n  }\n\n  let cookie2 = Cookie.get(\"cart1\");\n\n  if (cookie2 == undefined) {\n    return;\n  }\n\n  Cookie.remove(\"cart1\");\n  Cookie.remove(\"user\");\n}\nexport function getUserCookies() {\n  let cookie = Cookie.get(\"user\");\n\n  if (cookie == undefined) {\n    return;\n  }\n\n  return cookie;\n}\nexport function CookieUser(id, token) {\n  let cookie = Cookie.get(\"user\");\n\n  if (cookie == undefined) {\n    Cookie.set(\"user\", id + \",\" + token + \";\", {\n      path: \"/\"\n    });\n    return;\n  }\n\n  return;\n}\n_c = CookieUser;\nexport function addToCart(id) {\n  let cookieUser = Cookie.get(\"user\");\n  let id_user;\n  let token;\n\n  if (cookieUser != undefined) {\n    let array = cookieUser.split(\",\");\n    id_user = array[0];\n    token = array[1];\n  } else {\n    id_user = \"undefined\";\n  }\n\n  let cookie = Cookie.get(\"cart\" + id_user);\n\n  if (cookie == undefined) {\n    Cookie.set(\"cart\" + id_user, id + \",1;\", {\n      path: \"/\"\n    });\n    return;\n  }\n\n  let newCookie = \"\";\n  let isNewItem = true;\n  let toCompare = cookie.split(\";\");\n  let total = 0;\n  toCompare.forEach(item => {\n    if (item != \"\") {\n      let array = item.split(\",\");\n      let item_id = array[0];\n      let item_quantity = array[1];\n\n      if (id == item_id) {\n        item_quantity = Number(item_quantity) + 1;\n        isNewItem = false;\n      }\n\n      newCookie += item_id + \",\" + item_quantity + \";\";\n      total += Number(item_quantity);\n    }\n  });\n\n  if (isNewItem) {\n    newCookie += id + \",1;\";\n    total += 1;\n  }\n\n  cookie = newCookie;\n  Cookie.set(\"cart\" + id_user, cookie, {\n    path: \"/\"\n  });\n  return;\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"CookieUser\");","map":{"version":3,"names":["Cookies","Cookie","loginCookies","token","cookie","get","undefined","set","path","newCookie","console","log","logOutCookies","cookie2","remove","getUserCookies","CookieUser","id","addToCart","cookieUser","id_user","array","split","isNewItem","toCompare","total","forEach","item","item_id","item_quantity","Number"],"sources":["C:/Users/Joaquin/Desktop/Proyecto-Arqui-Softw/carrito/src/Cookies.js"],"sourcesContent":["import Cookies from \"universal-cookie\";\r\n\r\nconst Cookie = new Cookies();\r\n\r\nexport async function  loginCookies(token){\r\n    let cookie =  Cookie.get(\"user\")\r\n    if(cookie == undefined){\r\n\r\n        Cookie.set(\"user\",token,{path:\"/\"})\r\n        return true\r\n    }\r\n    let newCookie = token\r\n    console.log(\"New Token\", token)\r\n    Cookie.set(\"user\",newCookie,{path:\"/\"})\r\n    return true\r\n}\r\n\r\nexport function logOutCookies(){\r\n    let cookie = Cookie.get(\"user\")\r\n    if(cookie==undefined){\r\n        return\r\n    }\r\n    let cookie2 = Cookie.get(\"cart1\")\r\n    if(cookie2==undefined){\r\n        return\r\n    }\r\n    Cookie.remove(\"cart1\")\r\n    Cookie.remove(\"user\")\r\n}\r\n\r\nexport function getUserCookies(){\r\n    let cookie = Cookie.get(\"user\")\r\n    if (cookie == undefined){\r\n        return \r\n    }\r\n    return cookie\r\n\r\n}\r\n\r\nexport function CookieUser(id,token){\r\n  \r\n    let cookie = Cookie.get(\"user\");\r\n   \r\n    if(cookie == undefined){\r\n      Cookie.set(\"user\", id + \",\" + token + \";\", {path: \"/\"});\r\n      return\r\n    }\r\n    return\r\n}\r\n\r\nexport function addToCart(id){\r\n    let cookieUser = Cookie.get(\"user\")\r\n    let id_user;\r\n    let token;\r\n    if(cookieUser!=undefined){\r\n    let array = cookieUser.split(\",\")\r\n     id_user = array[0]\r\n     token=array[1]\r\n    }\r\n    else{\r\n         id_user = \"undefined\"\r\n    }\r\n      let cookie = Cookie.get(\"cart\"+id_user);\r\n     \r\n      if(cookie == undefined){\r\n        Cookie.set(\"cart\"+id_user, id + \",1;\", {path: \"/\"});\r\n       \r\n        return\r\n      }\r\n      let newCookie = \"\"\r\n      let isNewItem = true\r\n      let toCompare = cookie.split(\";\")\r\n      let total = 0;\r\n      toCompare.forEach((item) => {\r\n        if(item != \"\"){\r\n          let array = item.split(\",\")\r\n          let item_id = array[0]\r\n          let item_quantity = array[1]\r\n          if(id == item_id){\r\n            item_quantity = Number(item_quantity) + 1\r\n            isNewItem = false\r\n          }\r\n          newCookie += item_id + \",\" + item_quantity + \";\"\r\n          total += Number(item_quantity);\r\n        }\r\n      });\r\n      if(isNewItem){\r\n        newCookie += id + \",1;\"\r\n        total += 1;\r\n      }\r\n      cookie = newCookie\r\n      Cookie.set(\"cart\"+id_user, cookie, {path: \"/\"})\r\n     \r\n      return\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}